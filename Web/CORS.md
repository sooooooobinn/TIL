# CORS(교차 출처 리소스 공유)란?
CORS(Cross-Origin Resource Sharing)란 브라우저가 자신의 출처가 아닌 다른 출처(도메인, 스킴 혹은 포트)로부터 자원을 요청할 때, 서버가 허용한 경우에만 응답을 받을 수 있도록 하는 HTTP 헤더 기반 규칙이다.

쉽게 말하면, 다른 도메인에 있는 자원을 가져올 수 있게 해주는 규칙이다.

## Origin(출처)란?
프로토콜 + 도메인 + 포트를 합친 것이다. 이 세가지 중 하나라도 다르다면 다른 출처로 취급된다.

## SOP(동일 출처 정책)
SOP(Same Origin Policy)란 같은 origin끼리만 리소스를 공유할 수 있도록 하는 웹 보안의 기본 규칙이다.

대부분의 브라우저는 다른 누군가를 대신하여 많은 동작들을 수행하는데, 이때 브라우저에서 돌아가는 웹 애플리케이션이 악의적인 공격에 무방비한 상태로 노출되게 되는데, 이러한 문제점을 막기 위하여 브라우저의 악의적인 사이트가 다른 사이트의 민감한 정보를 훔쳐가지 못하도록 막는 장치이다.

 

### SOP 특징
동일 출처끼리 자유롭게 통신 가능, 
다른 출처는 기본적으로 차단

차단되는 대상
-  DOM(브라우저가 HTML 문서를 구조화한 객체 모델) 접근
- 쿠키, 로컬스토리지(브라우저에 데이터를 영구적으로 저장할 수 있는 공간) 같은 저장소 접근
-  AJAX(페이지를 새로 고치지 않고 서버와 데이터를 주고받는 기술) / Fetch(최신 자바스크립트 HTTP 요청 API) 요청 결과 확인
차단되지 않는 경우

img, script, link 태그를 통한 단순 리소스 로딩은 가능하다.

이러한 특징 덕분에 사용자의 정보 탈취를 막고  XSS, CSRF 같은 공격을 줄여준다.

## CORS(교차 출처 리소스 공유)
CORS(Cross-Origin Resource Sharing)란 SOP 때문에 막힌 다른 출처 요청을 허용하기 위한 규칙이다.

 SOP로 다른 출처에 있는 리소스를 사용하는 것은 막았지만, 너무나 흔한 경우이기 때문에 무작정 제한할 수만은 없어서 등장한 정책이 CORS이다.

 

### CORS 기본 동작
1. 브라우저가 다른 출처의 서버에 요청을 보낸다.
2. 서버가 응답할 때 CORS 관련 헤더를 함께 보낸다.
3. 브라우저는 그 헤더를 확인한다.
4. 허용된 출처라면 응답을 보여주고, 아니면 차단한다.
### CORS 특징
 SOP 보완
- SOP로 막힌 요청을 허용할 수 있다.

    교차 출처 요청 허용 규칙
- 서버가 허용한 다른 도메인 서버 자원을 가져올 수 있게 한다.

- 브라우저 검사 및 차단

    브라우저가 헤더를 확인하고 허용 여부를 결정한다.
- 보안 주의

    모든 출처 허용은 편리하지만 위험하다. 필요한 출처만 허용해야한다. 