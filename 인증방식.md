## 인증방식의 필요성
HTTP 프로토콜을 이용하여 통신한다 → 비연결성과 무상태의 특징을 지닌다.

- 비연결성 ( Connectionless )
  
  서버와 클라이언트가 연결되어 있지 않다.

- 무상태성 ( Stateless )
  
  서버가 클라이언트의 이전 상태를 저장하지 않는다.

위 특성들을 생각해보면 사용자가 로그인을 통하여 인증을 거쳐도 이후 요청에서는 인증된 상태를 유지할 수 없다. 
서버는 사용자가 로그인을 했다는 것을 기억하지 못하기 때문에 최초 로그인 이후 매 요청마다 사용자는 계속해서 로그인을 통하여 페이지 접근 인자를 받아야한다.


하지만 우리가 웹 애플리케이션을 사용할 때에는 최초 로그인 후 회원이 접근할 수 있는 페이지는 이용 가능하다. 이처럼, HTTP 프로토콜에서 인증/인가가 어떻게 이루어 지는 것일까?

>**인증/인가란?**
>- 인증
>
>   해당 유저가 실제 유저인지 인증
>  사용자 신원을 검증
>- 인가
>
>   인증 이후의 프로세스로 인증된 유저가 어떤 자원에 접근할 수 있는지 확인

## 쿠키(Cookie)
쿠키에 사용자의 인증 정보를 담아서 인증하는 방식


사용자가 로그인을 하면 서버는 사용자의 ID, PW 정보를 쿠키에 담아 브라우저로 다시 보낸다. 이후 브라우저는 요청할 때마다 쿠키를 함께 보낸다. 


### 쿠키 장점
- 기존 로그인 정보를 사용하기 때문에 인증을 위한 추가적인 데이터 저장이 필요하지 않다.
### 쿠키 단점
- 사용자의 주요 정보를 매번 요청에 담기 때문에 보안상 문제가 있다.
- 클라이언트에서 쿠키 정보를 쉽게 변경, 삭제할 수 있고 가로채기를 당할 수도 있다.
- 쿠키의 데이터 크기가 제한적이고, 쿠키 사이즈가 커질수록 네트워크 부하가 심하다.

이러한 단점들 때문에 쿠키는 많이 사용하지 않는 인증방식 중 하나이다.

## 세션 (Session)
서버에서 일정시간 동안 클라이언트 상태를 유지하기 위해 사용한다.

 

클라이언트와 서버 연결이 활성화된 상태로 쿠키와 마찬가지로 로그인을 할 때 사용하는 인증방식이다.

쿠키는 클라이언트에서 정보를 관리하는 방면, 세션은 서버가 정보를 관리한다.

 

서버에서 클라이언트 별 세션 ID를 부여하고 세션정보를 서버에 저장한다. 서버에서 생성한 세션 ID는 클라이언트의 쿠키 값(세션 쿠키)으로 저장된다.


클라이언트에서 요청이 올 때 세션 쿠키를 함께 보낸다. 서버에는 클라이언트별 세션 쿠키 값이 저장되어 있기 때문에 요청으로 온 세션 쿠키 값을 보고 어떤 클라이언트인지 식별할 수 있다.

 

### 세션 장점
- 사용자의 정보를 주고받지 않기 때문에 상대적으로 안전하다.
- 사용자마다 고유한 세션 ID가 있기 때문에 요청이 들어올 때마다 회원 DB를 찾지 않아도 된다.
### 세션 단점
- 세션 ID를 생성하고, 서버에 저장해야 하는 작업이 생긴다.
- 서버 세션 저장소를 사용해야 하므로 요청이 많아지면 서버 부하가 심해진다.
## JWT(JSON Web Token)
인증에 필요한 정보들을 암호화 시킨 토큰

토큰 구성 요소
- Header : 어떤 방식으로 서명되었는지를 알려주는 정보 (암호화할 방식(alg), 타입(type) 등)
- Payload : 실제 데이터가 담겨 있는 부분 (ex: 유저의 고유 ID값, 유효기간 등)
- Verify Signature : 서버가 만든 진짜 토큰인지 확인해주는 역할
>**Secret Key란?**
>
>암호화나 토큰 기반 인증(JWT 등)에서 사용하는 비밀 키를 의미한다.
 

로그인 시, 서버는 로그인 정보를 Payload에 담고, Secret Key를 사용하여 JWT를 발급한다.


서버가 JWT를 클라이언트에 전달하고 클라이언트는 전달받은 토큰(JWT)을 저장한다. 클라이언트가 서버에 요청을 할 때마다 토큰을 함께 전달한다. 서버는 클라이언트가 전달한 토큰의 Signature를 Secret Key로 복호화한 후 위변조 여부 및 유효기간을 검증한 후 JWT에서 사용자 정보를 확인하고 요청에 응답한다.

 

### JWT 장점
- 동시 접속자가 많을 때 서버 부하를 낮춘다.
- 클라이언트, 서버가 다른 도메인을 사용할 때 사용 가능하다.
- 인증 정보를 서버에 별도로 저장할 필요가 없다.
### JWT 단점
- 구현 복잡도가 증가한다.
- JWT에 담는  내용이 커질수록 네트워크 비용이 증가한다.
- 이미 생성된 JWT를 일부만 만료시킬 수 없다.
- Secret Key 유출 시 JWT 조작이 가능하다.
- Payload는 암호화되지 않기 때문에 사용자의 중요한 정보는 담을 수 없다.

